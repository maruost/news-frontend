!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"n",(function(){return o})),n.d(t,"u",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"m",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"s",(function(){return f})),n.d(t,"t",(function(){return h})),n.d(t,"p",(function(){return _})),n.d(t,"c",(function(){return p})),n.d(t,"r",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return g})),n.d(t,"q",(function(){return b})),n.d(t,"i",(function(){return w})),n.d(t,"l",(function(){return S})),n.d(t,"o",(function(){return E}));var r={empty:"Это обязательное поле",wrongLength:"Должно быть от 2 до 30 символов",wrongType:"Здесь должна быть ссылка",printEmail:"Введите действующий e-mail",missKeyWord:"Нужно ввести ключевое слово"},o=document.querySelector("#popup-signup"),i=document.querySelector("#popup-success"),a=document.querySelector("#popup-signin"),u=document.querySelector("#reg-header-btn"),s=document.querySelector("#auth-header-btn"),c=document.querySelector("#popup-signin-close"),l=document.querySelector("#popup-success-close"),d=document.querySelector("#popup-signup-close"),f=document.forms.login,h=document.forms.registration,_=document.forms.search,p=document.querySelector("#news-card-template").content,m=document.querySelector(".search-results__button"),v=document.querySelector("#exit-button"),y=document.querySelector(".header"),g=document.querySelector(".news-list"),b=document.querySelector(".search-results"),w=document.querySelector(".search-results__container"),S=document.querySelector(".not-found"),E=document.querySelector(".saved-articles")},function(e,t,n){"use strict";function r(){return!!localStorage.getItem("name")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){var n=new Date(e);return n.setDate(e.getDate()-t),n}function o(e){var t=new Date(Date.parse(e));return String(t.toISOString().match(/\d{4}\-\d{2}\-\d{2}/))}function i(e){return new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"})}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},function(e,t,n){var r={url:"https://api.my-news-explorer.gq/",headers:{"Content-Type":"application/json"}},o={url:"https://nomoreparties.co/news/v2/everything",headers:{authorization:"0c94ed05a1c74e599d2ccbf92efbc3dc"}};e.exports={configNewsApi:o,configMainApi:r}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));var u=function(){function e(t){var n=this,o=t.header;t.props;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"render",(function(e){var t=e.isLogged,o=e.userName;if(t){var i,a=r(n._menu.children);try{for(a.s();!(i=a.n()).done;){var u=i.value;"header-main-link"!==u.id&&u.classList.toggle("hide"),n._menu.querySelector(".header__name").textContent=o}}catch(e){a.e(e)}finally{a.f()}}})),a(this,"init",(function(){n._menuIconWrapper=document.querySelector(".header__menu-icon-wrapper"),n._menuIcon=document.querySelector(".header__menu-icon"),n._menu=document.querySelector(".header__menu"),n._fill=document.querySelector(".header__fill")})),a(this,"_toggleMenu",(function(){n._menuIcon.classList.toggle("header__menu-icon_active"),n._menu.classList.toggle("header__menu_is-opened"),n._header.classList.toggle("header_menu-is-opened"),n._fill.classList.toggle("header__fill_menu-is-opened")})),this._header=o}var t,n,o;return t=e,(n=[{key:"setEventListeners",value:function(){this._menuIconWrapper.addEventListener("click",this._toggleMenu)}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}));var i=function(){function e(t){var n=this,r=t.template,i=t.keyword,a=t.link,u=t.date,s=t.title,c=t.text,l=t.source,d=t.url,f=t.api,h=t.isLogged;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_save",(function(){n._api.saveArticle({partOfUrl:"articles",keyword:n._keyword,title:n._title,text:n._text,date:n._date,source:n._source,link:n._url,image:n._link}).catch((function(e){return console.log(e)}))})),o(this,"_toggleMessage",(function(){n._message=n._cardElement.querySelector(".news-card__message"),n._saveBtn.addEventListener("mouseover",(function(){n._message.classList.remove("hide")})),n._saveBtn.addEventListener("mouseout",(function(){n._message.classList.add("hide")}))})),o(this,"_renderIcon",(function(){n._saveIcon.classList.toggle("news-card__icon_marked"),n._saveBtn.setAttribute("disabled",!0)})),this._keyword=i,this._link=a,this._date=u,this._title=s,this._text=c,this._source=l,this._template=r,this._api=f,this._url=d,this._isLogged=h}var t,n,i;return t=e,(n=[{key:"createCard",value:function(){var e=this._template.cloneNode(!0).querySelector(".news-card");return console.log(this._link),this._link&&(e.querySelector(".news-card__image").src=this._link),e.querySelector(".news-card__date").textContent=this._date,e.querySelector(".news-card__title").textContent=this._title,e.querySelector(".news-card__text").textContent=this._text,e.querySelector(".news-card__source").textContent=this._source,e.querySelector(".news-card__btn_key-word").textContent=this._keyword,this._cardElement=e,this._setEventListeners(),e}},{key:"_setEventListeners",value:function(){var e=this;this._saveBtn=this._cardElement.querySelector(".news-card__btn"),this._saveIcon=this._saveBtn.querySelector(".news-card__icon"),this._deleteIcon=this._cardElement.querySelector("#delete-icon"),this._isLogged?(console.log(this._isLogged),this._saveBtn.addEventListener("click",(function(){e._renderIcon(),e._save()}))):this._saveBtn.addEventListener("mouseover",(function(){e._toggleMessage()}))}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}));var i=function(){function e(t){var n=this,r=t.container,i=t.cards;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"renderCard",(function(e){n._cards(e).forEach((function(e){n.addCard(e)}))})),o(this,"clear",(function(){for(;n._container.firstChild;)n._container.removeChild(n._container.firstChild)})),this._container=r,this._cards=i}var t,n,i;return t=e,(n=[{key:"addCard",value:function(e){this._container.append(e)}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"signup",(function(e){var t=e.partOfUrl,r=e.email,o=e.password,i=e.name;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o,name:i})}).then((function(e){return n._checkStatus(e)}))})),r(this,"signin",(function(e){var t=e.partOfUrl,r=e.email,o=e.password;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o})}).then((function(e){return n._checkStatus(e)}))})),r(this,"getUserData",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url,"users/").concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"getArticles",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url).concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"saveArticle",(function(e){var t=e.partOfUrl,r=e.keyword,o=e.title,i=e.text,a=e.date,u=e.source,s=e.link,c=e.image;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({keyword:r,title:o,text:i,date:a,source:u,link:s,image:c})}).then((function(e){return n._checkStatus(e)}))})),r(this,"removeArticle",(function(e){var t=e.partOfUrl,r=e.cardID;return fetch("".concat(n._url).concat(t,"/").concat(r),{method:"DELETE",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"_checkStatus",(function(e){return e.ok?e.json():Promise.reject(e)})),this.url=t.url,this.headers=t.headers}},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));var u=function(){function e(t){var n=this,r=t.container,o=t.showMoreBtn,i=t.renderNews;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"init",(function(){n._notFound=n._container.querySelector(".search-results__not-found"),n._loader=n._container.querySelector(".search-results__loader"),n._title=n._notFound.querySelector(".not-found__title"),n._subtitle=n._notFound.querySelector(".not-found__subtitle"),n._results=n._container.querySelector(".search-results__container")})),a(this,"renderLoading",(function(e){n._showElement(n._container),e?n._showElement(n._loader):n._hideElement(n._loader)})),a(this,"_showElement",(function(e){e.classList.contains("hide")&&e.classList.remove("hide")})),a(this,"_hideElement",(function(e){e.classList.contains("hide")||e.classList.add("hide")})),a(this,"renderNotFound",(function(){n._showElement(n._notFound),n._title.textContent="Ничего не найдено",n._subtitle.textContent="К сожалению, по вашему запросу ничего не найдено."})),a(this,"renderError",(function(){n._showElement(n._notFound),n._title.textContent="Oops!",n._subtitle.textContent="Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз"})),a(this,"renderResults",(function(){n._showElement(n._results)})),this._container=r,this._button=o,this._newsList=i}var t,n,o;return t=e,(n=[{key:"setInitialState",value:function(e){var t=this;r(e).slice(0).forEach((function(e){t._hideElement(e)}))}},{key:"setEventListeners",value:function(e){var t=this;console.log("peredali"),console.log(e),this._button.addEventListener("click",(function(){t._showMore(e)}))}},{key:"_showMore",value:function(e){e.length>3?this._newsList(e.splice(0,3)):(this._newsList(e.splice(0,3)),this._hideElement(this._button))}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(9);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function e(t){var n=this,r=t.popup,i=t.openButton,a=void 0===i?null:i,u=t.closeButton;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_open",(function(){n._popup.classList.add("popup_is-opened")})),o(this,"_close",(function(){n._popup.classList.remove("popup_is-opened")})),this._popup=r,this._openButton=a,this._closeButton=u}var t,n,i;return t=e,(n=[{key:"setEventListeners",value:function(){null!=this._openButton&&this._openButton.addEventListener("click",this._open),this._closeButton.addEventListener("click",this._close)}}])&&r(t.prototype,n),i&&r(t,i),e}();function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function e(t){var n=this,r=t.form,o=t.closeButton,i=t.errorMessages;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_getErrorSpan",(function(e){return n._form.querySelector('.error[data-for="'.concat(e.name,'"]'))})),a(this,"init",(function(){n._button=n._form.querySelector(".button"),n._inputs=Array.from(n._form.querySelectorAll("input")),n._errorsElements=Array.from(n._form.querySelectorAll(".error")),n.setEventListeners()})),a(this,"_handlerInputForm",(function(e){n._checkInputValidity(e.target),n._inputs.every(n._checkInputValidity)?n.setSubmitButtonState(!0):n.setSubmitButtonState(!1)})),a(this,"_checkInputValidity",(function(e){return e.validity.valid?(n._getErrorSpan(e).textContent="",!0):e.validity.valueMissing?("search"!==n._form.name?n._getErrorSpan(e).textContent=n._errorMessages.empty:n._getErrorSpan(e).textContent=n._errorMessages.missKeyWord,!1):e.validity.tooShort?(n._getErrorSpan(e).textContent=n._errorMessages.wrongLength,!1):e.validity.typeMismatch&&"url"===e.type?(n._getErrorSpan(e).textContent=n._errorMessages.wrongType,!1):e.validity.typeMismatch&&"email"===e.type?(n._getErrorSpan(e).textContent=n._errorMessages.printEmail,!1):e.checkValidity()})),a(this,"setSubmitButtonState",(function(e){e?(n._button.removeAttribute("disabled"),n._button.classList.add("button_active"),n._button.classList.remove("button_disabled")):(n._button.setAttribute("disabled",!0),n._button.classList.remove("button_active"),n._button.classList.add("button_disabled"))})),a(this,"resetValidation",(function(){n._errorsElements.forEach((function(e){e.textContent=""}))})),a(this,"setEventListeners",(function(){n._form.addEventListener("input",(function(e){return n._handlerInputForm(e)}))})),this._form=r,this._closeButton=o,this._errorMessages=i},s=n(4),c=n(5),l=n(6);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(2),h=n(1),_=n(8),p=n(7),m=n(3),v=n(0),y=new s.a({header:v.j});y.init(),y.setEventListeners(),y.render({isLogged:Object(h.a)(),userName:localStorage.getItem("name")});var g=new Date,b=Object(f.a)(g),w=Object(f.a)(Object(f.c)(g,7)),S=new u({form:v.s,closeButton:v.d,errorMessages:v.g}),E=new u({form:v.t,closeButton:v.e,errorMessages:v.g}),L=new u({form:v.p,errorMessages:v.g});S.init(),E.init(),L.init();var k=new i({popup:v.n,openButton:v.m,closeButton:v.e}),O=new i({popup:v.b,openButton:v.a,closeButton:v.d}),q=new i({popup:v.u,closeButton:v.f});k.setEventListeners(),O.setEventListeners(),q.setEventListeners();var j=new p.a(m.configMainApi),C=new function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"getCards",(function(e){var t=e.request,r=e.prevDate,o=e.currentDate,i=e.pageSize;return fetch("".concat(n.url)+"?q=".concat(t,"&")+"from=".concat(r,"&")+"to=".concat(o,"&")+"pageSize=".concat(i),{headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),d(this,"_checkStatus",(function(e){return e.ok?e.json():Promise.reject(e.status)})),this.url=t.url,this.headers=t.headers}(m.configNewsApi);v.t.addEventListener("submit",(function(){event.preventDefault(),j.signup({partOfUrl:"signup",email:v.t.elements.email.value,name:v.t.elements.name.value,password:v.t.elements.password.value}).then((function(e){q._open()})).catch((function(e){return console.log(e)})).finally((function(){k._close(),E.resetValidation(),E.setSubmitButtonState(!1),v.t.reset()}))})),v.s.addEventListener("submit",(function(){event.preventDefault(),j.signin({partOfUrl:"signin",email:v.s.elements.email.value,password:v.s.elements.password.value}).then((function(){j.getUserData({partOfUrl:"me"}).then((function(e){localStorage.setItem("name",e.data.name)})).catch((function(e){return console.log(e)})).finally((function(){y.render({isLogged:h.a,userName:localStorage.getItem("name")})}))})).catch((function(e){return console.log(e)})).finally((function(){O._close(),S.resetValidation(),S.setSubmitButtonState(!1),v.s.reset()}))})),v.p.addEventListener("submit",(function(){event.preventDefault(),I=[],x.clear(),v.r.classList.remove("hide"),B.setInitialState([v.q,v.i,v.l]),B.renderLoading(!0),C.getCards({request:v.p.elements["search-field"].value,prevDate:w,currentDate:b,pageSize:100}).then((function(e){0!==e.articles.length?(e.articles.forEach((function(e){I.push(e)})),x.renderCard(I.splice(0,3)),B.renderResults()):(console.log("whf?!!"),B.renderNotFound())})).then((function(){B.setEventListeners(I)})).catch((function(e){return B.renderError()})).finally((function(){return B.renderLoading(!1)}))}));var x=new l.a({container:v.k,cards:function(e){var t=[];return e.forEach((function(e){t.push(new c.a({template:v.c,keyword:v.p.elements["search-field"].value,link:e.urlToImage,date:Object(f.b)(Object(f.a)(e.publishedAt)),title:e.title,text:e.description,source:e.source.name,url:e.url,api:j,isLogged:Object(h.a)()}).createCard())})),t}}),I=[],B=new _.a({container:v.q,showMoreBtn:v.r,renderNews:x.renderCard});B.init(),v.h.addEventListener("click",(function(){document.cookie="token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",localStorage.removeItem("token"),localStorage.removeItem("name"),location.reload()}))}]);