!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"n",(function(){return o})),n.d(t,"u",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"m",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"s",(function(){return f})),n.d(t,"t",(function(){return _})),n.d(t,"p",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"r",(function(){return m})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"q",(function(){return w})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return k})),n.d(t,"o",(function(){return S}));var r={empty:"Это обязательное поле",wrongLength:"Должно быть от 2 до 30 символов",wrongLengthPassword:"Должно быть от 8 до 30 символов",wrongType:"Здесь должна быть ссылка",printEmail:"Введите действующий e-mail",missKeyWord:"Нужно ввести ключевое слово"},o=document.querySelector("#popup-signup"),c=document.querySelector("#popup-success"),i=document.querySelector("#popup-signin"),a=document.querySelector("#reg-header-btn"),s=document.querySelector("#auth-header-btn"),u=document.querySelector("#popup-signin-close"),l=document.querySelector("#popup-success-close"),d=document.querySelector("#popup-signup-close"),f=document.forms.login,_=document.forms.registration,h=document.forms.search,p=document.querySelector("#news-card-template").content,m=document.querySelector(".search-results__button"),g=document.querySelector("#exit-button"),y=document.querySelector(".header"),v=document.querySelector(".news-list"),w=document.querySelector(".search-results"),b=document.querySelector(".search-results__container"),k=document.querySelector(".not-found"),S=document.querySelector(".saved-articles")},function(e,t,n){"use strict";function r(){return!!localStorage.getItem("name")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return 401===e?console.log("Неправильные почта или пароль"):404===e?console.log("Не найдено"):409===e?console.log("Такой пользователь уже существует"):500===e?console.log("С сервером что-то не так"):403===e?console.log("Проверьте правильность заполнения полей"):(console.log(e),console.log("Что-то пошло не так"))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var r={url:"https://api.my-news-explorer.gq/",headers:{"Content-Type":"application/json"}},o={url:"https://nomoreparties.co/news/v2/everything"}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}));var a=function(){function e(t){var n=this,o=t.header,c=t.theme,a=void 0===c?null:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"render",(function(e){if(e.isLogged){var t,o=r(n._menu.children);try{for(o.s();!(t=o.n()).done;){var c=t.value;"header-main-link"!==c.id&&c.classList.toggle("hide")}}catch(e){o.e(e)}finally{o.f()}n.setOptions()}})),i(this,"setOptions",(function(){console.log(localStorage.getItem("name")),n._menu.querySelector(".header__name").textContent=localStorage.getItem("name"),n._header.classList.add(n._theme)})),i(this,"init",(function(){n._menuIconWrapper=document.querySelector(".header__menu-icon-wrapper"),n._menuIcon=document.querySelector(".header__menu-icon"),n._menu=document.querySelector(".header__menu"),n._fill=document.querySelector(".header__fill"),n.setEventListeners(),n.setOptions()})),i(this,"_setResizeViwer",(function(){n._toggleMenu(),window.addEventListener("resize",n._closeMenu)})),i(this,"_closeMenu",(function(){window.innerWidth>=590&&(n._menuIcon.classList.toggle("header__menu-icon_active"),n._menu.classList.toggle("header__menu_is-opened"),n._header.classList.toggle("header_menu-is-opened"),n._fill.classList.toggle("header__fill_menu-is-opened"),window.removeEventListener("resize",n._closeMenu))})),i(this,"_toggleMenu",(function(){n._menuIcon.classList.toggle("header__menu-icon_active"),n._menu.classList.toggle("header__menu_is-opened"),n._header.classList.toggle("header_menu-is-opened"),n._fill.classList.toggle("header__fill_menu-is-opened")})),this._header=o,this._theme=a}var t,n,o;return t=e,(n=[{key:"setEventListeners",value:function(){this._menuIconWrapper.addEventListener("click",this._setResizeViwer)}}])&&c(t.prototype,n),o&&c(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var c=function(){function e(t){var n=this,r=t.template,c=t.keyword,i=t.link,a=t.date,s=t.title,u=t.text,l=t.source,d=t.url,f=t.api,_=t.id,h=t.isLogged;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_setEventListeners",(function(e){n._iconBtn=n._cardElement.querySelector(".news-card__btn_icon"),n._iconIcon=n._iconBtn.querySelector(".news-card__icon"),n._deleteIcon=n._cardElement.querySelector("#delete-icon"),n._message=n._cardElement.querySelector(".news-card__message"),n._iconBtn.addEventListener("mouseover",n._toggleMessageByHover),n._iconBtn.addEventListener("mouseout",n._toggleMessageByHover),n._iconBtn.addEventListener("click",n._actByClick)})),o(this,"_remove",(function(){n._iconBtn.removeEventListener("mouseover",n._toggleMessageByHover),n._iconBtn.removeEventListener("mouseout",n._toggleMessageByHover),n._iconBtn.removeEventListener("click",(function(){return n._actByClick})),n._cardElement.remove()})),o(this,"_deleteArticleFromDB",(function(){n._api.removeArticle({partOfUrl:"articles",cardID:n._id}).catch((function(e){return console.log(e)}))})),o(this,"_save",(function(){return console.log(n._link),n._api.saveArticle({partOfUrl:"articles",keyword:n._keyword,title:n._title,text:n._text,date:n._date,source:n._source,link:n._link,image:n._link}).then((function(e){return n._id=e.data._id})).catch((function(e){return console.log(e)}))})),o(this,"_toggleMessageByHover",(function(){(n._isLogged&&"delete-icon"===n._iconBtn.id||!n._isLogged&&"save-icon"===n._iconBtn.id)&&n._toggleMessage()})),o(this,"_toggleMessage",(function(){n._message.classList.toggle("hide")})),o(this,"_actByClick",(function(){"save-icon"===n._iconBtn.id?n._isLogged?n._iconIcon.classList.contains("news-card__icon_marked")?(n._renderIcon(),n._deleteArticleFromDB()):(n._renderIcon(),n._save()):event.target.setAttribute("disabled",!0):"delete-icon"===n._iconBtn.id&&(n._isLogged?(console.log("залог бин"),n._deleteArticleFromDB(),n._remove()):event.target.setAttribute("disabled",!0))})),o(this,"_renderIcon",(function(){n._iconIcon.classList.toggle("news-card__icon_marked")})),this._keyword=c,this._link=i,this._date=a,this._title=s,this._text=u,this._source=l,this._template=r,this._api=f,this._url=d,this._isLogged=h,this._id=_}var t,n,c;return t=e,(n=[{key:"createCard",value:function(){var e=this,t=this._template.cloneNode(!0).querySelector(".news-card");return!this._link||(t.querySelector(".news-card__image").src=this._link),Array.from(t.querySelectorAll(".news-card__descrtiption-link")).forEach((function(t){t.href="".concat(e._url)})),t.querySelector(".news-card__date").textContent=this._date,t.querySelector(".news-card__title").textContent=this._title,t.querySelector(".news-card__text").textContent=this._text,t.querySelector(".news-card__source").textContent=this._source,t.querySelector(".news-card__btn_key-word").textContent=this._keyword,this._cardElement=t,this._setEventListeners(),t}}])&&r(t.prototype,n),c&&r(t,c),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var c=function(){function e(t){var n=this,r=t.container,c=t.cards;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"renderCard",(function(e){n._cards(e).forEach((function(e){n.addCard(e)}))})),o(this,"clear",(function(){for(;n._container.firstChild;)n._container.removeChild(n._container.firstChild)})),this._container=r,this._cards=c}var t,n,c;return t=e,(n=[{key:"addCard",value:function(e){this._container.append(e)}}])&&r(t.prototype,n),c&&r(t,c),e}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"signup",(function(e){var t=e.partOfUrl,r=e.email,o=e.password,c=e.name;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o,name:c})}).then((function(e){return n._checkStatus(e)}))})),r(this,"signin",(function(e){var t=e.partOfUrl,r=e.email,o=e.password;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o})}).then((function(e){return n._checkStatus(e)}))})),r(this,"getUserData",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url,"users/").concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"getArticles",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url).concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"saveArticle",(function(e){var t=e.partOfUrl,r=e.keyword,o=e.title,c=e.text,i=e.date,a=e.source,s=e.link,u=e.image;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({keyword:r,title:o,text:c,date:i,source:a,link:s,image:u})}).then((function(e){return n._checkStatus(e)}))})),r(this,"removeArticle",(function(e){var t=e.partOfUrl,r=e.cardID;return fetch("".concat(n.url).concat(t,"/").concat(r),{method:"DELETE",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"_checkStatus",(function(e){return e.ok?e.json():Promise.reject(e.status)})),this.url=t.url,this.headers=t.headers}},function(e,t,n){"use strict";function r(){document.cookie="token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",localStorage.removeItem("token"),localStorage.removeItem("name"),location.reload()}n.d(t,"a",(function(){return r}))},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(1),o=(n(9),n(4)),c=n(5),i=n(6),a=n(7);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(3),l=n(0);var d=n(2),f=n(8);Object(r.a)()||(window.location.href="index.html"),new o.a({header:l.j,theme:"header_theme_dark"}).init();var _=new a.a(u.a),h=new function e(t){var n=this,r=t.container,o=t.api,c=t.titleText;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"renderTitle",(function(e){n._name=localStorage.getItem("name"),n._title=n._container.querySelector(".saved-articles__title"),n._titleText(e)})),s(this,"renderKeyWords",(function(e){var t=e.length;t>3?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n      По ключевым словам: <span class="span-accent">'.concat(e[0].keyword,', </span\n      ><span class="span-accent">').concat(e[1].keyword,'</span> и\n      <span class="span-accent"> ').concat(t-2," другим</span>\n    </p>")):3===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n      По ключевым словам: <span class="span-accent">'.concat(e[0].keyword,', </span\n      ><span class="span-accent">').concat(e[1].keyword,'</span> и\n      <span class="span-accent"> ').concat(e[2].keyword," </span>\n    </p>")):2===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n    По ключевому слову: <span class="span-accent">'.concat(e[0].keyword,', </span\n    ><span class="span-accent">').concat(e[1].keyword,"</span>\n  </p>")):1===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\nПо ключевому слову: <span class="span-accent">'.concat(e[0].keyword,"\n</p>")):0===t&&n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n  </p>')})),this._container=r,this._api=o,this._titleText=c}({container:l.o,api:_,titleText:function(e){String(e).match(/\d*1$/)&&11!==e?this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённая карточка"):String(e).match(/\d*[05-9]$/)||e>10&&e<20?this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённых карточек"):this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённые карточки")}});h.renderTitle();var p=new i.a({container:l.k,cards:function(e){var t=[];return e.forEach((function(e){t.push(new c.a({template:l.c,keyword:e.keyword,link:e.image?e.image:"https://enix.ru/wp-content/uploads/2019/05/1531075372no_foto.jpg",date:e.date,title:e.title,text:e.text,source:e.source,url:e.link,api:_,id:e._id,isLogged:r.a}).createCard())})),t}});_.getArticles({partOfUrl:"articles"}).then((function(e){var t,n,r,o,c=(t=e.data,n=[],r=[],t.forEach((function(e){n.push(e.keyword)})),new Set(n).forEach((function(e){r.push({keyword:e,frequency:n.lastIndexOf(e)-n.indexOf(e)+1})})),r);c.sort((o="frequency",function(e,t){return e[o]>t[o]?-1:1})),h.renderTitle(e.data.length),h.renderKeyWords(c),p.renderCard(e.data)})).catch((function(e){return Object(d.a)(e)})),l.h.addEventListener("click",(function(){Object(f.a)()}))}]);