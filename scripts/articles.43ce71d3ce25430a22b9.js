!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"n",(function(){return o})),n.d(t,"u",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"m",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"s",(function(){return f})),n.d(t,"t",(function(){return h})),n.d(t,"p",(function(){return _})),n.d(t,"c",(function(){return p})),n.d(t,"r",(function(){return m})),n.d(t,"h",(function(){return y})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return v})),n.d(t,"q",(function(){return w})),n.d(t,"i",(function(){return b})),n.d(t,"l",(function(){return S})),n.d(t,"o",(function(){return k}));var r={empty:"Это обязательное поле",wrongLength:"Должно быть от 2 до 30 символов",wrongType:"Здесь должна быть ссылка",printEmail:"Введите действующий e-mail",missKeyWord:"Нужно ввести ключевое слово"},o=document.querySelector("#popup-signup"),i=document.querySelector("#popup-success"),a=document.querySelector("#popup-signin"),c=document.querySelector("#reg-header-btn"),s=document.querySelector("#auth-header-btn"),u=document.querySelector("#popup-signin-close"),l=document.querySelector("#popup-success-close"),d=document.querySelector("#popup-signup-close"),f=document.forms.login,h=document.forms.registration,_=document.forms.search,p=document.querySelector("#news-card-template").content,m=document.querySelector(".search-results__button"),y=document.querySelector("#exit-button"),g=document.querySelector(".header"),v=document.querySelector(".news-list"),w=document.querySelector(".search-results"),b=document.querySelector(".search-results__container"),S=document.querySelector(".not-found"),k=document.querySelector(".saved-articles")},function(e,t,n){"use strict";function r(){return!!localStorage.getItem("name")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){var n=new Date(e);return n.setDate(e.getDate()-t),n}function o(e){var t=new Date(Date.parse(e));return String(t.toISOString().match(/\d{4}\-\d{2}\-\d{2}/))}function i(e){return new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"})}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}))},function(e,t,n){var r={url:"https://api.my-news-explorer.gq/",headers:{"Content-Type":"application/json"}},o={url:"https://nomoreparties.co/news/v2/everything",headers:{authorization:"0c94ed05a1c74e599d2ccbf92efbc3dc"}};e.exports={configNewsApi:o,configMainApi:r}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var c=function(){function e(t){var n=this,o=t.header;t.props;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"render",(function(e){var t=e.isLogged,o=e.userName;if(t){var i,a=r(n._menu.children);try{for(a.s();!(i=a.n()).done;){var c=i.value;"header-main-link"!==c.id&&c.classList.toggle("hide"),n._menu.querySelector(".header__name").textContent=o}}catch(e){a.e(e)}finally{a.f()}}})),a(this,"init",(function(){n._menuIconWrapper=document.querySelector(".header__menu-icon-wrapper"),n._menuIcon=document.querySelector(".header__menu-icon"),n._menu=document.querySelector(".header__menu"),n._fill=document.querySelector(".header__fill")})),a(this,"_toggleMenu",(function(){n._menuIcon.classList.toggle("header__menu-icon_active"),n._menu.classList.toggle("header__menu_is-opened"),n._header.classList.toggle("header_menu-is-opened"),n._fill.classList.toggle("header__fill_menu-is-opened")})),this._header=o}var t,n,o;return t=e,(n=[{key:"setEventListeners",value:function(){this._menuIconWrapper.addEventListener("click",this._toggleMenu)}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}));var i=function(){function e(t){var n=this,r=t.template,i=t.keyword,a=t.link,c=t.date,s=t.title,u=t.text,l=t.source,d=t.url,f=t.api,h=t.isLogged;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_save",(function(){n._api.saveArticle({partOfUrl:"articles",keyword:n._keyword,title:n._title,text:n._text,date:n._date,source:n._source,link:n._url,image:n._link}).catch((function(e){return console.log(e)}))})),o(this,"_toggleMessage",(function(){n._message=n._cardElement.querySelector(".news-card__message"),n._saveBtn.addEventListener("mouseover",(function(){n._message.classList.remove("hide")})),n._saveBtn.addEventListener("mouseout",(function(){n._message.classList.add("hide")}))})),o(this,"_renderIcon",(function(){n._saveIcon.classList.toggle("news-card__icon_marked"),n._saveBtn.setAttribute("disabled",!0)})),this._keyword=i,this._link=a,this._date=c,this._title=s,this._text=u,this._source=l,this._template=r,this._api=f,this._url=d,this._isLogged=h}var t,n,i;return t=e,(n=[{key:"createCard",value:function(){var e=this._template.cloneNode(!0).querySelector(".news-card");return console.log(this._link),this._link&&(e.querySelector(".news-card__image").src=this._link),e.querySelector(".news-card__date").textContent=this._date,e.querySelector(".news-card__title").textContent=this._title,e.querySelector(".news-card__text").textContent=this._text,e.querySelector(".news-card__source").textContent=this._source,e.querySelector(".news-card__btn_key-word").textContent=this._keyword,this._cardElement=e,this._setEventListeners(),e}},{key:"_setEventListeners",value:function(){var e=this;this._saveBtn=this._cardElement.querySelector(".news-card__btn"),this._saveIcon=this._saveBtn.querySelector(".news-card__icon"),this._deleteIcon=this._cardElement.querySelector("#delete-icon"),this._isLogged?(console.log(this._isLogged),this._saveBtn.addEventListener("click",(function(){e._renderIcon(),e._save()}))):this._saveBtn.addEventListener("mouseover",(function(){e._toggleMessage()}))}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}));var i=function(){function e(t){var n=this,r=t.container,i=t.cards;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"renderCard",(function(e){n._cards(e).forEach((function(e){n.addCard(e)}))})),o(this,"clear",(function(){for(;n._container.firstChild;)n._container.removeChild(n._container.firstChild)})),this._container=r,this._cards=i}var t,n,i;return t=e,(n=[{key:"addCard",value:function(e){this._container.append(e)}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o}));var o=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"signup",(function(e){var t=e.partOfUrl,r=e.email,o=e.password,i=e.name;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o,name:i})}).then((function(e){return n._checkStatus(e)}))})),r(this,"signin",(function(e){var t=e.partOfUrl,r=e.email,o=e.password;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({email:r,password:o})}).then((function(e){return n._checkStatus(e)}))})),r(this,"getUserData",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url,"users/").concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"getArticles",(function(e){var t=e.partOfUrl;return fetch("".concat(n.url).concat(t),{method:"GET",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"saveArticle",(function(e){var t=e.partOfUrl,r=e.keyword,o=e.title,i=e.text,a=e.date,c=e.source,s=e.link,u=e.image;return fetch("".concat(n.url).concat(t),{method:"POST",credentials:"include",headers:n.headers,body:JSON.stringify({keyword:r,title:o,text:i,date:a,source:c,link:s,image:u})}).then((function(e){return n._checkStatus(e)}))})),r(this,"removeArticle",(function(e){var t=e.partOfUrl,r=e.cardID;return fetch("".concat(n._url).concat(t,"/").concat(r),{method:"DELETE",credentials:"include",headers:n.headers}).then((function(e){return n._checkStatus(e)}))})),r(this,"_checkStatus",(function(e){return e.ok?e.json():Promise.reject(e)})),this.url=t.url,this.headers=t.headers}},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return c}));var c=function(){function e(t){var n=this,r=t.container,o=t.showMoreBtn,i=t.renderNews;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"init",(function(){n._notFound=n._container.querySelector(".search-results__not-found"),n._loader=n._container.querySelector(".search-results__loader"),n._title=n._notFound.querySelector(".not-found__title"),n._subtitle=n._notFound.querySelector(".not-found__subtitle"),n._results=n._container.querySelector(".search-results__container")})),a(this,"renderLoading",(function(e){n._showElement(n._container),e?n._showElement(n._loader):n._hideElement(n._loader)})),a(this,"_showElement",(function(e){e.classList.contains("hide")&&e.classList.remove("hide")})),a(this,"_hideElement",(function(e){e.classList.contains("hide")||e.classList.add("hide")})),a(this,"renderNotFound",(function(){n._showElement(n._notFound),n._title.textContent="Ничего не найдено",n._subtitle.textContent="К сожалению, по вашему запросу ничего не найдено."})),a(this,"renderError",(function(){n._showElement(n._notFound),n._title.textContent="Oops!",n._subtitle.textContent="Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз"})),a(this,"renderResults",(function(){n._showElement(n._results)})),this._container=r,this._button=o,this._newsList=i}var t,n,o;return t=e,(n=[{key:"setInitialState",value:function(e){var t=this;r(e).slice(0).forEach((function(e){t._hideElement(e)}))}},{key:"setEventListeners",value:function(e){var t=this;console.log("peredali"),console.log(e),this._button.addEventListener("click",(function(){t._showMore(e)}))}},{key:"_showMore",value:function(e){e.length>3?this._newsList(e.splice(0,3)):(this._newsList(e.splice(0,3)),this._hideElement(this._button))}}])&&i(t.prototype,n),o&&i(t,o),e}()},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(9);var r=n(4),o=n(5),i=n(6),a=n(1),c=(n(8),n(7));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=n(3),l=n(0);n(2);console.log("fdfd"),Object(a.a)()||(window.location.href="index.html");var d=new r.a({header:l.j});console.log(l.o),d.init(),d.setEventListeners(),d.render({isLogged:Object(a.a)(),userName:localStorage.getItem("name")});var f=new c.a(u.configMainApi),h=new function e(t){var n=this,r=t.container,o=t.api,i=t.titleText;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"renderTitle",(function(e){n._name=localStorage.getItem("name"),n._title=n._container.querySelector(".saved-articles__title"),n._titleText(e)})),s(this,"renderKeyWords",(function(e){console.log;var t=e.length;console.log(t),console.log(e[0].keyword),t>3?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n      По ключевым словам: <span class="span-accent">'.concat(e[0].keyword,', </span\n      ><span class="span-accent">').concat(e[1].keyword,'</span> и\n      <span class="span-accent"> ').concat(t-2," другим</span>\n    </p>")):3===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n      По ключевым словам: <span class="span-accent">'.concat(e[0].keyword,', </span\n      ><span class="span-accent">').concat(e[1].keyword,'</span> и\n      <span class="span-accent"> ').concat(e[2].keyword," </span>\n    </p>")):2===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n    По ключевому слову: <span class="span-accent">'.concat(e[0].keyword,', </span\n    ><span class="span-accent">').concat(e[1].keyword,"</span>\n  </p>")):1===t?n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\nПо ключевому слову: <span class="span-accent">'.concat(e[0].keyword,"\n</p>")):0===t&&n._title.insertAdjacentHTML("afterend",'<p class="saved-articles__key-words">\n  </p>')})),this._container=r,this._api=o,this._titleText=i}({container:l.o,api:f,titleText:function(e){String(e).match(/\d*1$/)&&11!==e?this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённая карточка"):String(e).match(/\d*[05-9]$/)||e>10&&e<20?this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённых карточек"):this._title.textContent="".concat(this._name,", у вас ").concat(e," сохранённые карточки")}});h.renderTitle();var _=new i.a({container:l.k,cards:function(e){var t=[];return e.forEach((function(e){t.push(new o.a({template:l.c,keyword:e.keyword,link:e.image,date:e.date,title:e.title,text:e.text,source:e.source,url:e.link,api:f,isLogged:Object(a.a)()}).createCard())})),t}});f.getArticles({partOfUrl:"articles"}).then((function(e){console.log(e.data);var t,n,r,o,i=(t=e.data,n=[],r=[],t.forEach((function(e){n.push(e.keyword)})),new Set(n).forEach((function(e){r.push({keyword:e,frequency:n.lastIndexOf(e)-n.indexOf(e)+1})})),r);i.sort((o="frequency",function(e,t){return e[o]>t[o]?-1:1})),h.renderTitle(e.data.length),h.renderKeyWords(i),_.renderCard(e.data)})).catch((function(e){return console.log(e)})),l.h.addEventListener("click",(function(){document.cookie="token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",localStorage.removeItem("token"),localStorage.removeItem("name"),location.reload()}))}]);